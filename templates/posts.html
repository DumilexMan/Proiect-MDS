<!DOCTYPE html>
<html lang="en">
<head>
    <title>All Posts</title>
</head>
<body>
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <ul class="flashes">
            {% for message in messages %}
                <li>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endwith %}
    <h1>All Posts</h1>
    <ul>
        {% for post in posts %}
        <li>
            <h2>{{ post.title }}</h2>
            <p>{{ post.description }}</p>
            <p>Price: {{ post.price }}</p>
            <p>Status: {{ post.status }}</p>
            <a href="{{ url_for('get_post', post_id=post.id_post) }}">Access post</a>
        </li>
        {% endfor %}
    </ul>
 <label for="category">Produse in functie de categorie</label>
     <select id="category">
  <option value="">Toate</option>
  <option value="electronice">Electronice</option>
  <option value="imbracaminte">Imbracaminte</option>
  <option value="jucarii">Jucarii</option>
  <option value="carti">Carti</option>
  <option value="altele">Altele</option>
</select>
<label for="price">Produse in functie de pret</label>
     <select id="price">
  <option value="crescator">Crescator</option>
  <option value="descrescator">Descrescator</option>
</select>

<button class="filter-button">Filtreaza</button>
<script>
    const filterButton = document.querySelector('.filter-button');
filterButton.addEventListener('click', () => {
    const category = document.querySelector('#category').value;
    const priceOrder = document.querySelector('#price').value;

    if(category !== "") {
    if(priceOrder === "crescator") {
        window.location.href = `/posts_filter_by_category_ascending/${category}`;
    } else if(priceOrder === "descrescator") {
        window.location.href = `/posts_filter_by_category_descending/${category}`;
    } else {
        window.location.href = `/posts_filter_by_category/${category}`;
    }
    } else if(priceOrder === "crescator") {
    window.location.href = `/posts_filter_ascending_by_price?price_order=${priceOrder}`;
    } else if(priceOrder === "descrescator") {
    window.location.href = `/posts_filter_descending_by_price?price_order=${priceOrder}`;
}
});
</script>

</body>
</html>
